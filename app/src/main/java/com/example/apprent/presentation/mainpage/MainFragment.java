package com.example.apprent.presentation.mainpage;import android.app.Activity;import android.content.ComponentName;import android.content.Context;import android.content.Intent;import android.content.ServiceConnection;import android.os.Bundle;import android.os.IBinder;import android.util.Log;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.Button;import androidx.annotation.NonNull;import androidx.annotation.Nullable;import androidx.fragment.app.Fragment;import com.example.apprent.R;import com.example.apprent.data.notifications.NotificationHelper;import com.example.apprent.presentation.ExampleService;import com.example.apprent.presentation.mainactivity.MainActivity;public class MainFragment extends Fragment {    private static final String Tag = "MyApp";    private NotificationHelper mNotificationHelper;    private ExampleService mExampleService;    private Activity activity;    private Intent serviceIntent;    @Override    public void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        mNotificationHelper = new NotificationHelper(getContext());    }    @Override    public void onStart() {        super.onStart();        activity = getActivity();        serviceIntent = new Intent(activity, ExampleService.class);        // Связывание сервиса с фрагментом    }    @Override    public void onStop() {        super.onStop();        // Отключение связи сервиса с фрагментом        if (mExampleService != null) {            getActivity().unbindService(mServiceConnection);            mExampleService = null;        }    }    private ServiceConnection mServiceConnection = new ServiceConnection() {        @Override        public void onServiceConnected(ComponentName componentName, IBinder iBinder) {            // Получение объекта сервиса            ExampleService.ExampleBinder binder = (ExampleService.ExampleBinder) iBinder;            mExampleService = binder.getService();        }        @Override        public void onServiceDisconnected(ComponentName componentName) {            // Сервис был отключен            mExampleService = null;        }    };    @Override    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {        super.onViewCreated(view, savedInstanceState);        Log.i(Tag, "onViewCreated [MainFragment]");        Button button = view.findViewById(R.id.call_notification);        Button button1 = view.findViewById(R.id.call_service);        button.setOnClickListener(v -> {            Intent intent = new Intent(getContext(), MainActivity.class);            mNotificationHelper.showNotification("Заголовок уведомления", "Текст уведомления", intent);        });        button1.setOnClickListener(v -> activity.bindService(serviceIntent, mServiceConnection, Context.BIND_AUTO_CREATE));    }    @Override    public View onCreateView(LayoutInflater inflater, ViewGroup container,                             Bundle savedInstanceState) {        return inflater.inflate(R.layout.fragment_main, container, false);    }}